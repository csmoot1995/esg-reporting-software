services:
  compliance:
    build: ./services/compliance
    ports: ["8080:8080"]
    env_file: .env
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/health"]

  alerts:
    build: ./services/alerts
    ports: ["8081:8081"]
    env_file: .env
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8081/health"]

  simulator:
    build: ./services/simulator
    ports: ["8082:8082"]
    env_file: .env
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8082/health"]

  telemetry:
    build: ./services/telemetry
    ports: ["8083:8083"]
    env_file: .env
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8083/health"]

  frontend:
    build:
      context: .
      dockerfile: services/frontend/Dockerfile
    ports:
      - "3000:80"
    depends_on:
      - compliance
      - alerts
      - simulator
      - telemetry
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3000"]
